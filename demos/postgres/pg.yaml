includes:
  - base.yaml
# postgres
targets:
  # copy bins
  - target: /bin
    createlinks:
      - src: /bin/bash
        linkname: sh
      - src: /opt/python-occlum/bin/python3
        linkname: python3
    copy:
      - files:
        - /opt/occlum/toolchains/bash/glibc/bash
  # python packages
  - target: /opt
    copy:
      - dirs:
          - ../python-occlum
  - target: /usr/local/pgsql/bin
    copy:
      - files:
        - /usr/local/pgsql/bin/postgres
  - target: /usr/local/
    copy:
      - dirs:
        # PG files
        - /usr/local/pgsql
  - target: /etc/pgconf
    copy:
      - files:
        # PG config files
        - ../postgresql.conf
        - ../pg_hba.conf
  - target: /opt/occlum/glibc/lib
    copy:
      - files:
          - /opt/occlum/glibc/lib/libnss_dns.so.2
          - /opt/occlum/glibc/lib/libnss_files.so.2
          - /opt/occlum/glibc/lib/libnss_db.so.2
          - /usr/local/pgsql/lib/postgis-3.so
          - /usr/local/pgsql/lib/postgis_raster-3.so
          - /usr/local/pgsql/lib/citus.so
          - /usr/local/pgsql/lib/citus_columnar.so
          - /usr/local/pgsql/lib/pgml.so
